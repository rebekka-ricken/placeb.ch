{"version":3,"sources":["google-map.js","directives/google-map.ts"],"names":["SebmGoogleMap","SebmGoogleMap.constructor","SebmGoogleMap.ngOnInit","SebmGoogleMap._initMapInstance","SebmGoogleMap._containsMapOptionsChange","SebmGoogleMap.ngOnChanges","SebmGoogleMap.zoom","SebmGoogleMap.longitude","SebmGoogleMap.latitude","SebmGoogleMap._convertToDecimal","SebmGoogleMap._updateCenter","SebmGoogleMap._handleMapCenterChange","SebmGoogleMap._handleMapZoomChange","SebmGoogleMap._handleMapMouseEvents"],"mappings":"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","file":"directives/google-map.js","sourcesContent":[null,"import {\n  Component,\n  Renderer,\n  ElementRef,\n  EventEmitter,\n  OnChanges,\n  OnInit,\n  SimpleChange\n} from 'angular2/core';\nimport {GoogleMapsAPIWrapper} from '../services/google-maps-api-wrapper';\nimport {MarkerManager} from '../services/marker-manager';\nimport {LatLng, LatLngLiteral} from '../services/google-maps-types';\n\n/**\n * SebMGoogleMap renders a Google Map.\n * **Important note**: To be able see a map in the browser, you have to define a height for the CSS\n * class `sebm-google-map-container`.\n *\n * ### Example\n * ```typescript\n * import {Component} from 'angular2/core';\n * import {SebmGoogleMap} from 'angular2-google-maps/core';\n *\n * @Component({\n *  selector: 'my-map-cmp',\n *  directives: [SebmGoogleMap],\n *  styles: [`\n *    .sebm-google-map-container {\n *      height: 300px;\n *    }\n * `],\n *  template: `\n *    <sebm-google-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\n *    </sebm-google-map>\n *  `\n * })\n * ```\n */\n@Component({\n  selector: 'sebm-google-map',\n  providers: [GoogleMapsAPIWrapper, MarkerManager],\n  styles: [\n    `\n    .sebm-google-map-container-inner {\n      width: inherit;\n      height: inherit;\n    }\n  `\n  ],\n  inputs: ['longitude', 'latitude', 'zoom', 'disableDoubleClickZoom'],\n  outputs: ['mapClick', 'mapRightClick', 'mapDblClick'],\n  template: `\n    <div class=\"sebm-google-map-container-inner\"></div>\n    <ng-content></ng-content>\n  `\n})\nexport class SebmGoogleMap implements OnChanges,\n    OnInit {\n  private _longitude: number = 0;\n  private _latitude: number = 0;\n  private _zoom: number = 8;\n  /**\n   * Enables/disables zoom and center on double click. Enabled by default.\n   */\n  disableDoubleClickZoom: boolean = false;\n\n  private static _mapOptionsAttributes: string[] = ['disableDoubleClickZoom'];\n\n  /**\n   * This event emitter gets emitted when the user clicks on the map (but not when they click on a\n   * marker or infoWindow).\n   */\n  mapClick: EventEmitter<MapMouseEvent> = new EventEmitter<MapMouseEvent>();\n\n  /**\n   * This event emitter gets emitted when the user right-clicks on the map (but not when they click\n   * on a marker or infoWindow).\n   */\n  mapRightClick: EventEmitter<MapMouseEvent> = new EventEmitter<MapMouseEvent>();\n\n  /**\n   * This event emitter gets emitted when the user double-clicks on the map (but not when they click\n   * on a marker or infoWindow).\n   */\n  mapDblClick: EventEmitter<MapMouseEvent> = new EventEmitter<MapMouseEvent>();\n\n  constructor(\n      private _elem: ElementRef, private _mapsWrapper: GoogleMapsAPIWrapper,\n      private _renderer: Renderer) {}\n\n  /** @internal */\n  ngOnInit() {\n    this._renderer.setElementClass(this._elem.nativeElement, 'sebm-google-map-container', true);\n    const container = this._elem.nativeElement.querySelector('.sebm-google-map-container-inner');\n    this._initMapInstance(container);\n  }\n\n  private _initMapInstance(el: HTMLElement) {\n    this._mapsWrapper.createMap(\n        el, {center: {lat: this._latitude, lng: this._longitude}, zoom: this._zoom});\n    this._handleMapCenterChange();\n    this._handleMapZoomChange();\n    this._handleMapMouseEvents();\n  }\n\n  private static _containsMapOptionsChange(changesKeys: string[]): boolean {\n    return changesKeys.every(\n        (key: string) => { return SebmGoogleMap._mapOptionsAttributes.indexOf(key) !== 1; });\n  }\n\n  /** @internal */\n  ngOnChanges(changes: {[propName: string]: SimpleChange}) {\n    if (SebmGoogleMap._containsMapOptionsChange(Object.keys(changes))) {\n      this._mapsWrapper.setMapOptions({disableDoubleClickZoom: this.disableDoubleClickZoom});\n    }\n  }\n\n  /**\n   * Sets the zoom level of the map. The default value is `8`.\n   */\n  set zoom(value: number | string) {\n    this._zoom = this._convertToDecimal(value, 8);\n    if (typeof this._zoom === 'number') {\n      this._mapsWrapper.setZoom(this._zoom);\n    }\n  }\n\n  /**\n   * The longitude that sets the center of the map.\n   */\n  set longitude(value: number | string) {\n    this._longitude = this._convertToDecimal(value);\n    this._updateCenter();\n  }\n\n  /**\n   * The latitude that sets the center of the map.\n   */\n  set latitude(value: number | string) {\n    this._latitude = this._convertToDecimal(value);\n    this._updateCenter();\n  }\n\n  private _convertToDecimal(value: string | number, defaultValue: number = null): number {\n    if (typeof value === 'string') {\n      return parseFloat(value);\n    } else if (typeof value === 'number') {\n      return <number>value;\n    }\n    return defaultValue;\n  }\n\n  private _updateCenter() {\n    if (typeof this._latitude !== 'number' || typeof this._longitude !== 'number') {\n      return;\n    }\n    this._mapsWrapper.setCenter({\n      lat: this._latitude,\n      lng: this._longitude,\n    });\n  }\n\n  private _handleMapCenterChange() {\n    this._mapsWrapper.subscribeToMapEvent<void>('center_changed').subscribe(() => {\n      this._mapsWrapper.getCenter().then((center: LatLng) => {\n        this._latitude = center.lat();\n        this._longitude = center.lng();\n      });\n    });\n  }\n\n  private _handleMapZoomChange() {\n    this._mapsWrapper.subscribeToMapEvent<void>('zoom_changed')\n        .subscribe(() => { this._mapsWrapper.getZoom().then((z: number) => this._zoom = z); });\n  }\n\n  private _handleMapMouseEvents() {\n    interface Emitter {\n      emit(value: any): void;\n    }\n    type Event = {name: string, emitter: Emitter};\n\n    const events: Event[] = [\n      {name: 'click', emitter: this.mapClick},\n      {name: 'rightclick', emitter: this.mapRightClick},\n      {name: 'dblclick', emitter: this.mapDblClick}\n    ];\n\n    events.forEach((e: Event) => {\n      this._mapsWrapper.subscribeToMapEvent<{latLng: LatLng}>(e.name)\n          .subscribe((event: {latLng: LatLng}) => {\n            const value =\n                <MapMouseEvent>{coords: {lat: event.latLng.lat(), lng: event.latLng.lng()}};\n            e.emitter.emit(value);\n          });\n    });\n  }\n}\n\n/**\n * MapMouseEvent gets emitted when the user triggers mouse events on the map.\n */\nexport interface MapMouseEvent { coords: LatLngLiteral; }\n"],"sourceRoot":"/source/"}